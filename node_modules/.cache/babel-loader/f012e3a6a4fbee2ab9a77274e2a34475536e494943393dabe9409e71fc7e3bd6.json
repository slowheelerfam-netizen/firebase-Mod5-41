{"ast":null,"code":"import _objectSpread from\"/Users/donwheeler/Desktop/firebase-Mod5-4.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import'./App.css';import{auth,db}from'./firebase/init';import{collection,addDoc,getDocs,getDoc,doc}from\"firebase/firestore\";import Navbar from'./components/Navbar';import{createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut,onAuthStateChanged}from\"firebase/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";function App(){const[user,setUser]=React.useState({});const[loading,setLoading]=React.useState(true);const[authMessage,setAuthMessage]=React.useState('');function createPost(){const post={title:\"Land a $100k job\",description:\"Finish Frontend Simplified\"};addDoc(collection(db,\"posts\"),post).then(docRef=>{console.log(\"Document written with ID: \",docRef.id);}).catch(error=>{console.error(\"Error adding document: \",error);});}async function getAllPosts(){const{docs}=await getDocs(collection(db,\"posts\"));const posts=docs.map(elem=>_objectSpread(_objectSpread({},elem.data()),{},{id:elem.id}));console.log(posts);}async function getPostById(id){try{let targetId=id;if(!targetId){const result=await getDocs(collection(db,\"posts\"));if(!result.docs.length){console.log(\"No posts found\");return;}targetId=result.docs[0].id;}const ref=doc(db,\"posts\",targetId);const snap=await getDoc(ref);if(snap.exists()){console.log(_objectSpread({id:snap.id},snap.data()));}else{console.log(\"Post not found\");}}catch(error){console.error(\"Error getting post:\",error);}}React.useEffect(()=>{const unsubscribe=onAuthStateChanged(auth,user=>{setLoading(false);if(user){setUser(user);setAuthMessage('');}else{setUser({});}});return()=>unsubscribe();},[]);function register(){createUserWithEmailAndPassword(auth,'email@example.com','password123').then(user=>{console.log(user);}).catch(error=>{console.log(error);});}function login(){signInWithEmailAndPassword(auth,'email@example.com','password123').then(_ref=>{let{user}=_ref;console.log(user);setUser(user);}).catch(error=>{console.log(error);});}function logout(){signOut(auth);}return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(Navbar,{user:user,loading:loading,onLogin:login,onRegister:register,onLogout:logout,authMessage:authMessage,onCreatePost:createPost,onGetAllPosts:getAllPosts,onGetDocRef:getPostById})});}export default App;","map":{"version":3,"names":["React","auth","db","collection","addDoc","getDocs","getDoc","doc","Navbar","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","onAuthStateChanged","jsx","_jsx","App","user","setUser","useState","loading","setLoading","authMessage","setAuthMessage","createPost","post","title","description","then","docRef","console","log","id","catch","error","getAllPosts","docs","posts","map","elem","_objectSpread","data","getPostById","targetId","result","length","ref","snap","exists","useEffect","unsubscribe","register","login","_ref","logout","className","children","onLogin","onRegister","onLogout","onCreatePost","onGetAllPosts","onGetDocRef"],"sources":["/Users/donwheeler/Desktop/firebase-Mod5-4.1/src/App.js"],"sourcesContent":["import React from 'react';\nimport './App.css';\nimport { auth, db } from './firebase/init';\nimport { collection, addDoc, getDocs, getDoc, doc } from \"firebase/firestore\";\nimport Navbar from './components/Navbar';\nimport { \n  createUserWithEmailAndPassword, \n  signInWithEmailAndPassword,\n  signOut, \n  onAuthStateChanged\n } from \"firebase/auth\";\n\nfunction App() {\n  const [user, setUser] = React.useState({});\n  const [loading, setLoading] = React.useState(true);\n  const [authMessage, setAuthMessage] = React.useState('');\n  \nfunction createPost() {\n  const post = {\n    title: \"Land a $100k job\",\n    description: \"Finish Frontend Simplified\"\n  };\n\n  addDoc(collection(db, \"posts\"), post)\n    .then((docRef) => {\n      console.log(\"Document written with ID: \", docRef.id);\n    })\n    .catch((error) => {\n      console.error(\"Error adding document: \", error);\n    });\n}\n\nasync function getAllPosts() {\n  const { docs } = await getDocs(collection(db, \"posts\"))\n  const posts = docs.map((elem) => ({ ...elem.data(), id: elem.id }));\n  console.log(posts)\n}\n\nasync function getPostById(id) {\n  try {\n    let targetId = id;\n    if (!targetId) {\n      const result = await getDocs(collection(db, \"posts\"));\n      if (!result.docs.length) {\n        console.log(\"No posts found\");\n        return;\n      }\n      targetId = result.docs[0].id;\n    }\n    const ref = doc(db, \"posts\", targetId);\n    const snap = await getDoc(ref);\n    if (snap.exists()) {\n      console.log({ id: snap.id, ...snap.data() });\n    } else {\n      console.log(\"Post not found\");\n    }\n  } catch (error) {\n    console.error(\"Error getting post:\", error);\n  }\n}\n\nReact.useEffect(() => {\n  const unsubscribe = onAuthStateChanged(auth, (user) => {\n    setLoading(false);\n    if (user) {\n      setUser(user);\n      setAuthMessage('');\n    } else {\n      setUser({});\n    }\n  });\n\n  return () => unsubscribe();\n}, []);\n\n\n  function register() {\n      createUserWithEmailAndPassword(auth, 'email@example.com', 'password123')\n        .then((user) => {\n          console.log(user)\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n  }\n\n  function login() {\n    signInWithEmailAndPassword(auth, 'email@example.com', 'password123')\n        .then(({ user }) => {\n            console.log(user)\n          setUser(user)\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n  }\n\n  function logout() {\n    signOut(auth);\n}\n\nreturn (\n  <div className=\"App\">\n    <Navbar \n      user={user} \n      loading={loading} \n      onLogin={login} \n      onRegister={register} \n      onLogout={logout} \n      authMessage={authMessage}\n      onCreatePost={createPost}\n      onGetAllPosts={getAllPosts}\n      onGetDocRef={getPostById}\n    />\n\n  </div>\n);\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}