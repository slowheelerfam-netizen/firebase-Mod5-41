{"ast":null,"code":"import React from'react';import'./App.css';import{auth,db}from'./firebase/init';import{collection,addDoc,getDocs}from\"firebase/firestore\";import Navbar from'./components/Navbar';import{createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut,onAuthStateChanged}from\"firebase/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";function App(){const[user,setUser]=React.useState({});const[loading,setLoading]=React.useState(true);const[authMessage,setAuthMessage]=React.useState('');function createPost(){const post={title:\"Land a $100k job\",description:\"Finish Frontend Simplified\"};addDoc(collection(db,\"posts\"),post).then(docRef=>{console.log(\"Document written with ID: \",docRef.id);}).catch(error=>{console.error(\"Error adding document: \",error);});}async function getAllPosts(){const data=await getDocs(collection(db,\"posts\"));console.log(data.docs);}React.useEffect(()=>{const unsubscribe=onAuthStateChanged(auth,user=>{setLoading(false);if(user){setUser(user);setAuthMessage('');}else{setUser({});}});return()=>unsubscribe();},[]);function register(){createUserWithEmailAndPassword(auth,'email@example.com','password123').then(user=>{console.log(user);}).catch(error=>{console.log(error);});}function login(){signInWithEmailAndPassword(auth,'email@example.com','password123').then(_ref=>{let{user}=_ref;console.log(user);setUser(user);}).catch(error=>{console.log(error);});}function logout(){signOut(auth);}return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(Navbar,{user:user,loading:loading,onLogin:login,onRegister:register,onLogout:logout,authMessage:authMessage,onCreatePost:createPost,onGetAllPosts:getAllPosts})});}export default App;","map":{"version":3,"names":["React","auth","db","collection","addDoc","getDocs","Navbar","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","onAuthStateChanged","jsx","_jsx","App","user","setUser","useState","loading","setLoading","authMessage","setAuthMessage","createPost","post","title","description","then","docRef","console","log","id","catch","error","getAllPosts","data","docs","useEffect","unsubscribe","register","login","_ref","logout","className","children","onLogin","onRegister","onLogout","onCreatePost","onGetAllPosts"],"sources":["/Users/donwheeler/Desktop/firebase-Mod5-4.1/src/App.js"],"sourcesContent":["import React from 'react';\nimport './App.css';\nimport { auth, db } from './firebase/init';\nimport { collection, addDoc, getDocs } from \"firebase/firestore\";\nimport Navbar from './components/Navbar';\nimport { \n  createUserWithEmailAndPassword, \n  signInWithEmailAndPassword,\n  signOut, \n  onAuthStateChanged\n } from \"firebase/auth\";\n\nfunction App() {\n  const [user, setUser] = React.useState({});\n  const [loading, setLoading] = React.useState(true);\n  const [authMessage, setAuthMessage] = React.useState('');\n  \nfunction createPost() {\n  const post = {\n    title: \"Land a $100k job\",\n    description: \"Finish Frontend Simplified\"\n  };\n\n  addDoc(collection(db, \"posts\"), post)\n    .then((docRef) => {\n      console.log(\"Document written with ID: \", docRef.id);\n    })\n    .catch((error) => {\n      console.error(\"Error adding document: \", error);\n    });\n}\n\nasync function getAllPosts() {\n  const data = await getDocs(collection(db, \"posts\"))\n  console.log(data.docs)\n}\n\nReact.useEffect(() => {\n  const unsubscribe = onAuthStateChanged(auth, (user) => {\n    setLoading(false);\n    if (user) {\n      setUser(user);\n      setAuthMessage('');\n    } else {\n      setUser({});\n    }\n  });\n\n  return () => unsubscribe();\n}, []);\n\n\n  function register() {\n      createUserWithEmailAndPassword(auth, 'email@example.com', 'password123')\n        .then((user) => {\n          console.log(user)\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n  }\n\n  function login() {\n    signInWithEmailAndPassword(auth, 'email@example.com', 'password123')\n        .then(({ user }) => {\n            console.log(user)\n          setUser(user)\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n  }\n\n  function logout() {\n    signOut(auth);\n}\n\nreturn (\n  <div className=\"App\">\n    <Navbar \n      user={user} \n      loading={loading} \n      onLogin={login} \n      onRegister={register} \n      onLogout={logout} \n      authMessage={authMessage}\n      onCreatePost={createPost}\n      onGetAllPosts={getAllPosts}\n    />\n\n  </div>\n);\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}